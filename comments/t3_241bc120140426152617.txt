The question isn't illegal, the question is evidence of illegal intent which can only be determined in reference to that sort of evidence.  

So, while technically legal, it is in practice illegal.

Technically taking something from a store and walking away without paying isn't *in and of itself* theft.  Theft requires the additional element of the intent to deprive the owner of the property permanently.  Taking something from a store and walking away without paying will however almost always be sufficient evidence for the relevant intent to sustain a theft conviction.  So it is technically not theft but in practice theft.  