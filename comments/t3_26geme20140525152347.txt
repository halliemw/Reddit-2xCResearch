Oh man, don't feel down on yourself for this!  His comment sucked!  

I can somewhat relate.  I've had depression on and off.  Once I had a friend write me a long email about how my moodiness was too draining for her and our group of friends.  I think she had good intentions.  But oh man, it was a punch in the gut and felt so goddamn condescending.  I stopped talking to her for a while.  But I did go back to therapy and eventually got my shit together.  Looking back, she probably did me a service by saying something, as hard as it was to hear at the time.

I'm not saying you're overreacting at ALL.  Just maybe this experience will be the gut punch that helps you to start turning things around.

Don't feel guilty about where you are in life, or for being depressed, or for your weight.  You shouldn't have to guilt yourself into getting in better shape.  Guilt is the enemy.  You are awesome.

Cognitive behavioral therapy helped me, it's all about learning to identify all the negative thoughts that end up making you feel shitty about yourself. Google it if you're interested and hang in there.