It's a matter of context. A bar is a place where it's socially acceptable, or at least expected, to flirt with other people. A woman telling you to smile in a bar is probably flirting, and the assumption is that you might be open to such attention because you're at a bar. But we're talking about being told to smile while walking down the street, waiting for a train, etc. Just out in normal every day life. There is no reason to assume that a woman would be open to any sort of attention relating to her appearance or facial expression (as a general rule, most women do not appreciate comments about their physical appearance by strangers in any context). By the same token, if a guy was walking down the street minding his own business and a woman told him to smile, I think that would also be inappropriate. 