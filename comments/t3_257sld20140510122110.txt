This is a cultural issue and it will vary according to where you are.  You won't offend (almost) anyone in the South by calling them "ma'am", and you risk to be seen as impolite if you don't.  Surely, this is changing, but not as fast as one would expect.  I think you can't go wrong with it in a professional setting, but in a social setting you just have to use your better judgement.  Sometimes you will get it right, sometimes you will get it wrong, as we can't read minds.  If someone tells you not to call them that, then apologize and don't do it again, that is really the only thing you can do.