Yeah. When people mention that you've lost weight, they really do mean it as a compliment, but it's in my opinion rather impolite. You are not being irrational in feeling  offended by this guy. He's insinuating that you in some way looked "bad" before and in my opinion, "you've lost weight" IS ALWAYS a backhanded compliment. 

The only person in polite company who is allowed to bring attention to weight loss is the person who achieved said weight loss. 