That makes it clearer. I hope you don't encounter this situation again, but if you do, I think the best and most important thing you can do is respond immediately. Your own personal space is worth sticking up for and it's okay not to be nice about it. Who cares if the guy 'realises' he's touching your ass, it's YOUR butt he's grabbing and you DO realise it, so point it out to him. You don't have to shout at him or make a scene to make sure everyone knows what he did, especially because that creates a barrier for you to say something. Tell him quietly if that helps, just make sure you protect your barriers.

Personally, I'm always scared that if you don't reprimand unwanted behaviour immediately then he'll think it's okay and that you like it. This happens when I go out with friends, if a guy decides he wants to dance with you and have his arm around you and you don't tell him to stop it, he'll think you're really into it and before you know it he's pushing your face into yours trying to steal your gum. 

