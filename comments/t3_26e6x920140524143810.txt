Hugging is not misleading, and everyone should be able to hangout with a friend one-on-one without them making inappropriate advances! It was clear to him that you were in a relationship, and for him to disregard that and go for a kiss is not cool. 

Would it have been different if he just had a talk with you about how he felt about you? Or would you have rather he just keep his feelings to himself? 