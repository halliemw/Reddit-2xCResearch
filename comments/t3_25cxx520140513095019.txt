I think this is an incredibly obnoxious gesture and giving them the benefit of the doubt saying "Oh he/she meant well" doesn't make me feel any less rage. First of all, just because somebody isn't smiling doesn't mean they are not content or happy. Sometimes when people are absorbed in a thought process they lose track of how their face looks. Being told to "smile" by a stranger implies that in order for everyone to believe you're approachable, you have to have a smile plastered to your face.

I know how you feel. This has happened to me a few times before as I am a victim of resting bitch face. I've had people ask why I "look" so sad or "stressed" (and I wish I could inform them that stress has various forms other than the cartoonish impression of smoke flying out of someone's ears). If you have time to spare, I think it's perfectly fair to let them know that everything is all right, that you are fine/happy/content/relieved and maybe you can inform them that sometimes people don't feel the need to show off a smile, that they can enjoy things inwardly. 

[I think if people are going to tell others to smile without knowing what their situation is, they should expect things like this](http://www.youtube.com/watch?v=l_1FbjuJp4E)