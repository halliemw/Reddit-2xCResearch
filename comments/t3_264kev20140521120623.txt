As someone who wore a uniform (as many schools in Ireland do) our dress codes were strictly enforced. I feel that it has little to do with body shaming and more to teach teenagers how to dress for certain situations. As an adult if your place of work is "professional attire" you cannot go into work in an item of clothing that is not appropriate. I think it's a good thing to teach young adults what is and isn't appropriate for professional situations and in my opinion school is a professional situation. We had rules about your skirt hitting your knee, your socks being certain lengths (below your knee or just above your knee, had to be navy in colour) or your tights being navy and a wool material (not sheer). We were taught that if we didn't follow these rules we would be made go home and change or we would get detention or get in trouble. It didn't matter if the rules were "fair" or not, we were in an institution of learning and as such we must dress professionally. Outside of school a lot of the clothes I wore would have been in no way appropriate for a professional environment (because I got very large breasts very early on and didn't know how to dress for them). 

I went to an all girls school as well just to explain my experience. We were never told to roll our skirts back down to just above our knees because it would cause our male classmates to stare or to be distracted (as we had no male classmates). We were told to roll them down because the dress code says they must be below the knee and rules are rules. You would know which teachers would let you away with it and which teachers would make you kneel on the floor to show that your skirt did touch the ground (which would mean it was at your knee). 

In my opinion if you want to have a dress code you should have a uniform. It means that teachers have concrete things to mention of your clothes are inappropriate. When the dress code in my school was broken it was never because someone was wearing something "too sexy" it was because it was the incorrect length, incorrect colour or not allowed to be worn. It gets rid of the view that someone with a small chest can get away with wearing X and someone with a large chest not getting away with wearing X because everyone is uniform! There are always arguments about dress codes but I feel having a uniform gets rid of a HUGE amount of the idea of body shaming in regards to dress codes. I also say this as someone who hated her uniform because it didn't look nice. As an adult working in a professional industry now I think it was a great thing to wear and a great lesson to learn.