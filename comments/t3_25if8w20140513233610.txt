Agreed, if people are treating you like shit then you shouldn't spend time with them, no matter how long you've known them. If your good friend is a real friend then she'll stick by you, if she doesn't then she's no friend to you and good riddance. 