The idea of not having pepper spray because it's illegal is misguided. 

Will the rapist kindly invoke you to a duel, or a fair fight ? Will he let you know in advance he will hit you so you can yell and defend yourself? 


No he will play dirty and use all his illegal and unfair advantages. So if a pepper spray is illegal than get an illegal thing. When was the last time you got body searched by the police anyways... Never? 

So get it. Keep it in your hand. Don't walk with headphones. Don't walk next to things that can hide people (middle of the well lit street, wide berths for around corners).