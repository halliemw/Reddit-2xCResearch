I struggled with this as well and had a hard time *trying* to make friends. In my experience when I stopped trying and started focusing on being happy myself I immediately started attracting friends. I found that other people saw me happy and thought I was fun so they wanted to join in. Might not work for everyone but my advice would be to find out what makes you really happy and keep doing it and other people will follow.

On the same note if you see someone who looks really happy and fun talk to them and find out what they are doing and if it would make you as happy. Thats how I've made friends, it might seem overly simplified and probably is but its worked for me.