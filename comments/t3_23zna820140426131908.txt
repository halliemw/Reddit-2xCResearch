It is *definitely* self selection. An average woman will not feel good enough whereas an average man in somewhere like engineering will likely stay and have a higher opinion of his abilities.