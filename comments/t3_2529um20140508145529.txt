Attraction is not an exact science. You cannot hold yourself (or really, him) responsible for how he felt towards you. 

However, you can most certainly hold him responsible for how he handled the situation. The two of you had established a fair amount of trust over the preceding months I'm sure, and so you should have been able to trust him to be honest with you. Not saying anything and having sex with you under false pretenses is nothing less than him taking advantage of you. 

It seems like he was trying not to hurt your feelings by bluntly rejecting you, but this should have meant going out for a bite to eat or something. Regardless, I don't think there really is any way to "get over" this. It'll always be in the back of your mind. The only thought I have is that you need to do things you enjoy and be around friends/family that make you feel good about yourself.

Be strong.